{% extends "letters/base.html" %}
{% block content %}

<h1>Your Dashboard</h1>

<div class="card">
    <h2>Connection Requests</h2>
    {% for req in pending_requests %}
        <p>{{ req.requester.username }}
            <a class="btn btn-success" href="{% url 'accept' req.id %}">Accept</a>
        </p>
    {% empty %}
        <p>No pending requests</p>
    {% endfor %}
</div>

<div class="card">
    <h2>My Connections</h2>
    {% for conn in connections %}
        {% if conn.requester == user %}
            <a class="btn btn-primary" href="{% url 'conversation' conn.receiver.id %}">
                {{ conn.receiver.username }}
            </a>
        {% else %}
            <a class="btn btn-primary" href="{% url 'conversation' conn.requester.id %}">
                {{ conn.requester.username }}
            </a>
        {% endif %}
    {% empty %}
        <p>No connections</p>
    {% endfor %}
</div>

{% endblock %}
